@if (Context.User.Identity.Name != null)
{
    @if (User.IsInRole("Tutor"))
    {
        <ul class="nav navbar-nav navbar-right">
            <li>
                <span>Hello @Context.User.Identity.Name!</span>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="notificationDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa fa-bell position-relative">
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger d-none" id="notificationBadge">
                            0
                        </span>
                    </i>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notificationDropdown" id="notificationList">
                    <li><span class="dropdown-item text-muted">No new notifications</span></li>
                </ul>
            </li>
            <li>
                <a href="@Url.Action("Logout", "Account")">Logout</a>
            </li>
        </ul>
    }
    else
    {
        <ul class="nav navbar-nav navbar-right">
            <li>
                <span>Hello @Context.User.Identity.Name!</span>
            </li>
            <li>
                @{
                    var profileImagePath = User.FindFirst("ProfileImage")?.Value;
                    var imagePath = System.IO.Path.Combine("wwwroot/userProfile", profileImagePath ?? "");

                    imagePath = (!string.IsNullOrEmpty(profileImagePath) && System.IO.File.Exists(imagePath))
                    ? $"/userProfile/{profileImagePath}"
                    : "/images/default-profile-image.png";
                }
                <img src="@Url.Content(imagePath)" alt="Profile Image" class="rounded-circle" style="width: 60px; height: 60px; object-fit: cover;">
            </li>
            <li>
                <a href="@Url.Action("Cart", "ChapterContent")" class="nav-link text-dark">
                    <i class="fas fa-shopping-cart"></i>
                </a>
            </li>
            <li>
                <div class="col-md-2 p-0">
                    @await Html.PartialAsync("_SideNavBar")
                </div>
            </li>
        </ul>
    }
}
else
{
    <ul class="nav navbar-nav navbar-right">
        <li><a class="nav-link text-dark" asp-controller="Account" asp-action="Registration">Registration</a></li>
        <li><a class="nav-link text-dark" asp-controller="Account" asp-action="Login">Login</a></li>
    </ul>
}

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.0/signalr.min.js"></script>
<script src="~/js/notifications.js" asp-append-version="true"></script>


